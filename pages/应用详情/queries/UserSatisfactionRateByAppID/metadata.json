{
  "gitSyncId": "671b096154c46730aaa1eabc_0bdacd10-1471-4dbf-a20b-4fcb732a6d94",
  "id": "应用详情_UserSatisfactionRateByAppID",
  "pluginId": "postgres-plugin",
  "pluginType": "DB",
  "unpublishedAction": {
    "actionConfiguration": {
      "body": "SELECT\n\tDATE(m.created_at) AS x,\n\tCASE\n    WHEN COUNT(m.id) = 0 THEN 0\n    ELSE ROUND(CAST((CAST(COUNT(mf.id) AS FLOAT) / COUNT(m.id) * 1000) AS NUMERIC), 3) \n\tEND AS y\nFROM\n\tpublic.messages m\nLEFT JOIN\n\tpublic.message_feedbacks mf\n\tON mf.message_id=m.id AND mf.rating='like'\nWHERE\n\tm.app_id = '{{utils.getAppID()}}'\n\tAND m.created_at >= '{{SelectDate.selectedOptionValue || utils.getLastDaysRange(7)}}'\nGROUP BY \n\tx \nORDER BY \n\tx\nLIMIT 15;",
      "encodeParamsToggle": true,
      "paginationType": "NONE",
      "pluginSpecifiedTemplates": [
        {
          "value": true
        }
      ],
      "timeoutInMillisecond": 10000
    },
    "confirmBeforeExecute": false,
    "datasource": {
      "id": "dify (1)",
      "isAutoGenerated": false,
      "name": "dify (1)",
      "pluginId": "postgres-plugin"
    },
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "executeOnLoad": false,
    "name": "UserSatisfactionRateByAppID",
    "pageId": "应用详情",
    "userSetOnLoad": false
  }
}